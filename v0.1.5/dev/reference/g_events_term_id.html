<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Events by Term Plot — g_events_term_id • osprey</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Events by Term Plot — g_events_term_id" />
<meta property="og:description" content="This function plots commonly occurred events by number of unique subjects with events.
It creates basic summary of events and compares event occurrences between comparison
and reference arms, and can be used for events data such as Adverse Events." />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">osprey</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.1.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<!-- start_releases -->
<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
Other releases
<span class="caret"></span></a><ul class="dropdown-menu" role="menu">
   <li><a href="../../../index.html">latest</a></li>
   <li><a href="../../../pre-release/index.html">pre-release</a></li>
   <li><a href="../../../v0.1.11/index.html">v0.1.11</a></li>
   <li><a href="../../../v0.1.10/index.html">v0.1.10</a></li>
   <li><a href="../../../v0.1.9/index.html">v0.1.9</a></li>
   <li><a href="../../../v0.1.8/index.html">v0.1.8</a></li>
   <li><a href="../../../v0.1.7/index.html">v0.1.7</a></li>
   <li><a href="../../../v0.1.6/index.html">v0.1.6</a></li>
   <li><a href="../../../v0.1.5/index.html">v0.1.5</a></li>
   <li><a href="../../../v0.1.4/index.html">v0.1.4</a></li>
   <li><a href="../../../v0.1.3/index.html">v0.1.3</a></li>
</ul></li>
<!-- end_releases -->
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.roche.com/Rpackages/osprey">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Events by Term Plot</h1>
    
    <div class="hidden name"><code>g_events_term_id.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function plots commonly occurred events by number of unique subjects with events.
It creates basic summary of events and compares event occurrences between comparison
and reference arms, and can be used for events data such as Adverse Events.</p>
    </div>

    <pre class="usage"><span class='fu'>g_events_term_id</span>(
  <span class='no'>term</span>,
  <span class='no'>id</span>,
  <span class='no'>arm</span>,
  <span class='no'>arm_N</span>,
  <span class='kw'>ref</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span>(<span class='no'>arm</span>)[<span class='fl'>1</span>],
  <span class='kw'>trt</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span>(<span class='no'>arm</span>)[<span class='fl'>2</span>],
  <span class='kw'>sort_by</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"term"</span>, <span class='st'>"riskdiff"</span>, <span class='st'>"meanrisk"</span>),
  <span class='kw'>rate_range</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>1</span>),
  <span class='kw'>diff_range</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(-<span class='fl'>1</span>, <span class='fl'>1</span>),
  <span class='kw'>reversed</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>conf_level</span> <span class='kw'>=</span> <span class='fl'>0.95</span>,
  <span class='kw'>diff_ci_method</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"wald"</span>, <span class='st'>"waldcc"</span>, <span class='st'>"ac"</span>, <span class='st'>"score"</span>, <span class='st'>"scorecc"</span>, <span class='st'>"mn"</span>, <span class='st'>"mee"</span>, <span class='st'>"blj"</span>,
    <span class='st'>"ha"</span>, <span class='st'>"beal"</span>),
  <span class='kw'>axis_side</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"left"</span>, <span class='st'>"right"</span>),
  <span class='kw'>color</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"blue"</span>, <span class='st'>"red"</span>),
  <span class='kw'>shape</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>16</span>, <span class='fl'>17</span>),
  <span class='kw'>fontsize</span> <span class='kw'>=</span> <span class='fl'>4</span>,
  <span class='kw'>draw</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>term</th>
      <td><p><code>character</code> or <code>factor</code> vector, or <code>data.frame</code> <br />
Represents events information. <code>term</code> can be a <code>data.frame</code> produced
by <code>create_flag_vars</code>, with each column being a <code>logical</code> event indicator</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p><code>vector</code> contains subject identifier. Length of <code>id</code> must be the
same as the length or number of rows of <code>terms</code>. Ususally it is <code>ADAE$USUBJID</code>.</p></td>
    </tr>
    <tr>
      <th>arm</th>
      <td><p><code>factor</code> vector that contains arm informatiion in analysis data.
For example, <code>ADAE$ACTARMCD</code>.</p></td>
    </tr>
    <tr>
      <th>arm_N</th>
      <td><p>(<code>numeric</code> vector)<br />
Contains information of the number of patients in the levels of <code>arm</code>. This is useful
if there are patients that have no adverse events can be accounted for with this argument.</p></td>
    </tr>
    <tr>
      <th>ref</th>
      <td><p><code>character</code> indicates the name of the reference arm. Default is the first
level of <code>arm</code>.</p></td>
    </tr>
    <tr>
      <th>trt</th>
      <td><p><code>character</code> indicates the name of the treatment arm. Default is the second
level of <code>arm</code>.</p></td>
    </tr>
    <tr>
      <th>sort_by</th>
      <td><p><code>character</code> indicates how each <code>term</code> is sorted in the plot.
Choose from "term" for alphabetic terms, "riskdiff" for risk difference, and "meanrisk"
for mean risk. Default is "term".</p></td>
    </tr>
    <tr>
      <th>rate_range</th>
      <td><p>Numeric <code>vector</code> of length 2. Range for overall rate display</p></td>
    </tr>
    <tr>
      <th>diff_range</th>
      <td><p>Numeric <code>vector</code> of length 2. Range for rate difference display</p></td>
    </tr>
    <tr>
      <th>reversed</th>
      <td><p><code>logical</code> whether to reverse the sorting by <code>sort_by</code>.
Default is FALSE.</p></td>
    </tr>
    <tr>
      <th>conf_level</th>
      <td><p><code>numeric</code> The confidence interval level, default is 0.95.</p></td>
    </tr>
    <tr>
      <th>diff_ci_method</th>
      <td><p><code>character</code> The method used to calculate confidence interval.
Defalt is "wald". Possible choices are methods supported in <code><a href='https://rdrr.io/pkg/DescTools/man/BinomDiffCI.html'>BinomDiffCI</a></code>.</p></td>
    </tr>
    <tr>
      <th>axis_side</th>
      <td><p><code>character</code> the side of the axis label, "left" or "right". Default is "left".</p></td>
    </tr>
    <tr>
      <th>color</th>
      <td><p>Color for the plot. <code>vector</code> of length 2. Color for reference and
treatment arms respectively. Default set to <code><a href='https://rdrr.io/r/base/c.html'>c("blue", "red")</a></code>.</p></td>
    </tr>
    <tr>
      <th>shape</th>
      <td><p>Shape for the plot. <code>vector</code> of length 2. Shape for reference and
treatment arms respectively. Default set to <code><a href='https://rdrr.io/r/base/c.html'>c(16, 17)</a></code> per
<code><a href='https://ggplot2.tidyverse.org/reference/scale_shape.html'>scale_shape</a></code>.</p></td>
    </tr>
    <tr>
      <th>fontsize</th>
      <td><p><code>numeric</code> font size for the plot. It is the size used in ggplot2 with
default unit "mm", if you want "points" you will need to devide the point number by
<code>ggplot2:::.pt</code>.</p></td>
    </tr>
    <tr>
      <th>draw</th>
      <td><p><code>logical</code> whether to draw the plot.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>grob object</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>there is no equivalent STREAM output</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>random.cdisc.data</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>osprey</span>)

<span class='no'>ADSL</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/random.cdisc.data/man/radsl.html'>radsl</a></span>(<span class='kw'>cached</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>ADAE</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/random.cdisc.data/man/radae.html'>radae</a></span>(<span class='kw'>cached</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># add additional dummy causality flags</span>
<span class='no'>ADAE</span> <span class='kw'>&lt;-</span> <span class='no'>ADAE</span> <span class='kw'>%&gt;%</span>
  <span class='fu'>mutate</span>(<span class='kw'>AEREL1</span> <span class='kw'>=</span> (<span class='no'>AEREL</span> <span class='kw'>==</span> <span class='st'>"Y"</span> <span class='kw'>&amp;</span> <span class='no'>ACTARM</span> <span class='kw'>==</span> <span class='st'>"A: Drug X"</span>)) <span class='kw'>%&gt;%</span>
  <span class='fu'>mutate</span>(<span class='kw'>AEREL2</span> <span class='kw'>=</span> (<span class='no'>AEREL</span> <span class='kw'>==</span> <span class='st'>"Y"</span> <span class='kw'>&amp;</span> <span class='no'>ACTARM</span> <span class='kw'>==</span> <span class='st'>"B: Placebo"</span>)) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>rtables</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/rtables/man/var_relabel.html'>var_relabel</a></span>(
    <span class='kw'>AEREL1</span> <span class='kw'>=</span> <span class='st'>"AE related to A: Drug X"</span>,
    <span class='kw'>AEREL2</span> <span class='kw'>=</span> <span class='st'>"AE related to B: Placebo"</span>
  )

<span class='no'>term</span> <span class='kw'>&lt;-</span> <span class='no'>ADAE</span>$<span class='no'>AEDECOD</span>
<span class='no'>id</span> <span class='kw'>&lt;-</span> <span class='no'>ADAE</span>$<span class='no'>USUBJID</span>
<span class='no'>arm</span> <span class='kw'>&lt;-</span> <span class='no'>ADAE</span>$<span class='no'>ACTARMCD</span>
<span class='no'>arm_N</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span>(<span class='no'>ADSL</span>$<span class='no'>ACTARMCD</span>)
<span class='no'>ref</span> <span class='kw'>&lt;-</span> <span class='st'>"ARM A"</span>
<span class='no'>trt</span> <span class='kw'>&lt;-</span> <span class='st'>"ARM C"</span>
<span class='co'># Example 1</span>
<span class='no'>p1</span> <span class='kw'>&lt;-</span> <span class='fu'>g_events_term_id</span>(
  <span class='no'>term</span>,
  <span class='no'>id</span>,
  <span class='no'>arm</span>,
  <span class='no'>arm_N</span>
)</div><div class='img'><img src='g_events_term_id-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>grid.newpage</span>()
<span class='fu'>grid.draw</span>(<span class='no'>p1</span>)</div><div class='input'>
<span class='co'># Example 2</span>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='fu'>g_events_term_id</span>(
  <span class='no'>term</span>,
  <span class='no'>id</span>,
  <span class='no'>arm</span>,
  <span class='no'>arm_N</span>,
  <span class='kw'>trt</span> <span class='kw'>=</span> <span class='no'>trt</span>,
  <span class='kw'>ref</span> <span class='kw'>=</span> <span class='no'>ref</span>,
  <span class='kw'>sort_by</span> <span class='kw'>=</span> <span class='st'>"riskdiff"</span>,
  <span class='kw'>diff_ci_method</span> <span class='kw'>=</span> <span class='st'>"ac"</span>,
  <span class='kw'>conf_level</span> <span class='kw'>=</span> <span class='fl'>0.9</span>
)</div><div class='img'><img src='g_events_term_id-2.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>grid.newpage</span>()
<span class='fu'>grid.draw</span>(<span class='no'>p2</span>)</div><div class='input'>
<span class='co'># Example 3</span>
<span class='no'>p3</span> <span class='kw'>&lt;-</span> <span class='fu'>g_events_term_id</span>(
  <span class='no'>term</span>,
  <span class='no'>id</span>,
  <span class='no'>arm</span>,
  <span class='no'>arm_N</span>,
  <span class='kw'>sort_by</span> <span class='kw'>=</span> <span class='st'>"meanrisk"</span>,
  <span class='kw'>axis_side</span> <span class='kw'>=</span> <span class='st'>"right"</span>,
  <span class='kw'>fontsize</span> <span class='kw'>=</span> <span class='fl'>5</span>
)</div><div class='img'><img src='g_events_term_id-3.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>grid.newpage</span>()
<span class='fu'>grid.draw</span>(<span class='no'>p3</span>)</div><div class='input'>
<span class='co'># Example 4</span>
<span class='no'>term</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='create_flag_vars.html'>create_flag_vars</a></span>(<span class='no'>ADAE</span>)
<span class='fu'>g_events_term_id</span>(
  <span class='no'>term</span>,
  <span class='no'>id</span>,
  <span class='no'>arm</span>,
  <span class='no'>arm_N</span>,
  <span class='kw'>fontsize</span> <span class='kw'>=</span> <span class='fl'>3</span>
)</div><div class='img'><img src='g_events_term_id-4.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Liming Li (Lil128) <a href='mailto:liming.li@roche.com'>liming.li@roche.com</a></p>
<p>Molly He (hey59) <a href='mailto:hey59@gene.com'>hey59@gene.com</a></p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nina Qi, Chendi Liao, Mahdi About, Fei Wang, Mika Maekinen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


