<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Adverse Events Table by Highest NCI CTCAE Grade — t_ae_ctc_v2 • osprey</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Adverse Events Table by Highest NCI CTCAE Grade — t_ae_ctc_v2" />

<meta property="og:description" content="t_ae_ctc_v2 returns adverse events sorted by highest NCI (National Cancer
 Institute) CTCAE (common terminology criteria for adverse avents) grade." />
<meta name="twitter:card" content="summary" />

<meta name="robots" content="noindex">

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">osprey</a>
        <span class="label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development package">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/osprey_teal.html">Using Osprey TLGs with teal</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.roche.com/Rpackages/osprey">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Adverse Events Table by Highest NCI CTCAE Grade</h1>
    
    <div class="hidden name"><code>t_ae_ctc_v2.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>t_ae_ctc_v2</code> returns adverse events sorted by highest NCI (National Cancer
 Institute) CTCAE (common terminology criteria for adverse avents) grade.</p>
    
    </div>

    <pre class="usage"><span class='fu'>t_ae_ctc_v2</span>(<span class='no'>class</span>, <span class='no'>term</span>, <span class='no'>id</span>, <span class='no'>grade</span>, <span class='no'>col_by</span>, <span class='kw'>total</span> <span class='kw'>=</span> <span class='st'>"All Patients"</span>,
  <span class='kw'>grade_levels</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>5</span>, <span class='kw'>sort_by</span> <span class='kw'>=</span> <span class='st'>"count"</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>class</th>
      <td><p>system organ class variable.</p></td>
    </tr>
    <tr>
      <th>term</th>
      <td><p>preferred term variable.</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>unique subject identifier variable. If a particular subject has no
adverse event then the subject <code>id</code> should be listed where
<code>class</code> and <code>term</code> should be set to missing (i.e. <code>NA</code>).</p></td>
    </tr>
    <tr>
      <th>grade</th>
      <td><p>grade of adverse event variable.</p></td>
    </tr>
    <tr>
      <th>col_by</th>
      <td><p>group variable that will be used for a column header. <code>col_by</code>
has to be a factor and can not be missing. See 'Examples'.</p></td>
    </tr>
    <tr>
      <th>total</th>
      <td><p>character string that will be used as a label for a column with
pooled total population, default is "All Patients", if set to "NONE" then
the "All Patients" column is suppressed.</p></td>
    </tr>
    <tr>
      <th>grade_levels</th>
      <td><p>ordered values of possible of grades in a form of
<code>x:y</code>, default is <code>1:5</code>. This assures a proper fill in for
grades, see 'Details'.</p></td>
    </tr>
    <tr>
      <th>sort_by</th>
      <td><p>character string that defines the ordering of the class and term
variables in the output table,
options: "alphabetical" or "count", default here is set to "count"</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>t_ae_ctc_v2</code> counts patients according to adverse events (AEs) of greatest
 intensity for system organ class (SOC) and overall rows and includes
 percentages based on the total number of patients in the column heading
 (i.e. "N=nnn"). If the intention is to use patients number from subject level
 dataset as N for percentage calculation then adeverse events dataset should
 be left joined to subject level dataset and the <code>col_by</code> variable should
 be dropped from adverse events dataset, see the example. Otherwise, N will be
 derived using adverse events dataset. At the preferred term (PT) level,
 multiple events within a patient of the same PT are counted once using the
 greatest intensity reported.</p>
<p><code>t_ae_ctc_v2</code> removes any non-complete records, e.g. if class or term are
 missing. If the intent is to preserve such records, then impute missing
 values before using <code>t_ae_ctc_v2</code>.</p>
<p><code>t_ae_ctc_v2</code> orders data by "All Patients" column from the most commonly
 reported SOC to the least frequent one. Within SOC, it sorts by decreasing
 frequency of PT. It brakes ties using SOC/PT names in alphabetical order.</p>
<p><code>t_ae_ctc_v2</code> fills in <code>col_by</code> and <code>grade</code> with <code>0</code> value
in case there was no AEs reported for particular <code>col_by</code> and/or
<code>grade</code> category. Use <code>grade_levels</code> to modify the range of existing
grades. If data does not have any records with <code>grade</code> 5 and the intent
is to show only grades 1-4 rows then use <code>grade_levels = 1:4</code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Simple example</span>
<span class='fu'>library</span>(<span class='no'>tibble</span>)
<span class='fu'>library</span>(<span class='no'>dplyr</span>)

<span class='no'>ASL</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></span>(
  <span class='kw'>USUBJID</span> <span class='kw'>=</span> <span class='fu'>paste0</span>(<span class='st'>"id-"</span>, <span class='fl'>1</span>:<span class='fl'>10</span>),
  <span class='kw'>ARM</span> <span class='kw'>=</span> <span class='fu'>paste</span>(<span class='st'>"ARM"</span>, <span class='no'>LETTERS</span>[<span class='fu'>rep</span>(<span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>2</span>), <span class='fu'>c</span>(<span class='fl'>3</span>,<span class='fl'>7</span>))])
)


<span class='no'>ae_lookup</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/tibble/topics/tribble'>tribble</a></span>(
~<span class='no'>CLASS</span>,         ~<span class='no'>TERM</span>,   ~<span class='no'>GRADE</span>,
<span class='st'>"cl A"</span>,   <span class='st'>"trm A_1/2"</span>,        <span class='fl'>1</span>,
<span class='st'>"cl A"</span>,   <span class='st'>"trm A_2/2"</span>,        <span class='fl'>2</span>,
<span class='st'>"cl B"</span>,   <span class='st'>"trm B_1/3"</span>,        <span class='fl'>2</span>,
<span class='st'>"cl B"</span>,   <span class='st'>"trm B_2/3"</span>,        <span class='fl'>3</span>,
<span class='st'>"cl B"</span>,   <span class='st'>"trm B_3/3"</span>,        <span class='fl'>1</span>,
<span class='st'>"cl C"</span>,   <span class='st'>"trm C_1/1"</span>,        <span class='fl'>1</span>
)

<span class='no'>AAE</span> <span class='kw'>&lt;-</span> <span class='fu'>cbind</span>(
  <span class='fu'><a href='http://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></span>(
    <span class='kw'>USUBJID</span> <span class='kw'>=</span> <span class='no'>ASL</span>$<span class='no'>USUBJID</span>[<span class='fu'>c</span>(<span class='fl'>2</span>,<span class='fl'>2</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>4</span>,<span class='fl'>4</span>,<span class='fl'>4</span>,<span class='fl'>5</span>,<span class='fl'>6</span>,<span class='fl'>6</span>,<span class='fl'>7</span>,<span class='fl'>7</span>)]
  ),
  <span class='no'>ae_lookup</span>[<span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>6</span>,<span class='fl'>4</span>,<span class='fl'>2</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>2</span>,<span class='fl'>1</span>,<span class='fl'>5</span>,<span class='fl'>4</span>,<span class='fl'>6</span>),]
)

<span class='no'>ANL</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://dplyr.tidyverse.org/reference/join.html'>left_join</a></span>(<span class='no'>ASL</span>, <span class='no'>AAE</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='st'>"USUBJID"</span>)

<span class='no'>tbl</span> <span class='kw'>&lt;-</span> <span class='fu'>t_ae_ctc_v2</span>(
  <span class='kw'>class</span> <span class='kw'>=</span> <span class='no'>ANL</span>$<span class='no'>CLASS</span>,
  <span class='kw'>term</span> <span class='kw'>=</span>  <span class='no'>ANL</span>$<span class='no'>TERM</span>,
  <span class='kw'>id</span> <span class='kw'>=</span> <span class='no'>ANL</span>$<span class='no'>USUBJID</span>,
  <span class='kw'>grade</span> <span class='kw'>=</span> <span class='no'>ANL</span>$<span class='no'>GRADE</span>,
  <span class='kw'>col_by</span> <span class='kw'>=</span> <span class='fu'>factor</span>(<span class='no'>ANL</span>$<span class='no'>ARM</span>),
  <span class='kw'>total</span> <span class='kw'>=</span> <span class='st'>"All Patients"</span>,
  <span class='kw'>grade_levels</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>
)</div><div class='output co'>#&gt; <span class='error'>Error in match.fun(f): object 'shift_label_table' not found</span></div><div class='input'>
<span class='no'>tbl</span></div><div class='output co'>#&gt; function (src, ...) 
#&gt; {
#&gt;     UseMethod("tbl")
#&gt; }
#&gt; &lt;bytecode: 0x7fba20942e08&gt;
#&gt; &lt;environment: namespace:dplyr&gt;</div><div class='input'>

<span class='fu'>library</span>(<span class='no'>random.cdisc.data</span>)
<span class='fu'>library</span>(<span class='no'>dplyr</span>)

<span class='no'>ASL</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/random.cdisc.data/topics/radam'>radam</a></span>(<span class='st'>"ASL"</span>, <span class='kw'>N</span> <span class='kw'>=</span> <span class='fl'>10</span>)
<span class='no'>AAE</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/random.cdisc.data/topics/radam'>radam</a></span>(<span class='st'>"AAE"</span>, <span class='kw'>ADSL</span> <span class='kw'>=</span> <span class='no'>ASL</span>)

<span class='no'>ANL</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://dplyr.tidyverse.org/reference/join.html'>left_join</a></span>(<span class='no'>AAE</span>, <span class='no'>ASL</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='http://dplyr.tidyverse.org/reference/select.html'>select</a></span>(<span class='no'>USUBJID</span>, <span class='no'>STUDYID</span>, <span class='no'>ARM</span>), <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"STUDYID"</span>, <span class='st'>"USUBJID"</span>))

<span class='no'>tbl</span> <span class='kw'>&lt;-</span> <span class='fu'>with</span>(<span class='no'>ANL</span>,
            <span class='fu'>t_ae_ctc_v2</span>(
              <span class='kw'>class</span> <span class='kw'>=</span> <span class='no'>AEBODSYS</span>,
              <span class='kw'>term</span> <span class='kw'>=</span>  <span class='no'>AEDECOD</span>,
              <span class='kw'>id</span> <span class='kw'>=</span> <span class='no'>USUBJID</span>,
              <span class='kw'>grade</span> <span class='kw'>=</span> <span class='no'>AETOXGR</span>,
              <span class='kw'>col_by</span> <span class='kw'>=</span> <span class='fu'>factor</span>(<span class='no'>ARM</span>),
              <span class='kw'>total</span> <span class='kw'>=</span> <span class='st'>"All Patients"</span>,
              <span class='kw'>grade_levels</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>5</span>,
              <span class='kw'>sort_by</span> <span class='kw'>=</span> <span class='st'>"alphabetical"</span>
            )
)</div><div class='output co'>#&gt; <span class='error'>Error in Map(shift_label_table, tbls_i, names(tbls_i)): object 'shift_label_table' not found</span></div><div class='input'>
<span class='no'>tbl</span></div><div class='output co'>#&gt; function (src, ...) 
#&gt; {
#&gt;     UseMethod("tbl")
#&gt; }
#&gt; &lt;bytecode: 0x7fba20942e08&gt;
#&gt; &lt;environment: namespace:dplyr&gt;</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Edgar Manukya

Adrian Waddell

Carolyn Zhang

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Mika Maekinen, Adrian Waddell, Chendi Liao, Nina Qi, Carolyn Zhang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

