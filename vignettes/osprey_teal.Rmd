---
title: "Using Osprey TLGs with teal"
author: "Adrian Waddell"
date: "2/1/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Using an osprey outputs with teal

Here is a code to run the `spiderplot` in a teal module:


```{r eval=FALSE}
library(teal)
library(osprey)
library(random.cdisc.data)

ASL <- radam("ASL", N=10 ,start_with = list(CHANGE = c(0, 80, 85, 90), STUDYID = c("A","B")))
ATE <- radam("ATE", N=10 ,start_with = list(CHANGE = c(0, 80, 85, 90), STUDYID = c("A","B")))

x <- teal::init(
  data = list(ASL=ASL, ATE = ATE),
  modules = root_modules(
    tm_data_table(),
    module(
      label = "Spiderplot",
      ui = function(id) {ns <- NS(id); plotOutput(ns("plot"))},
      server = function(input, output, session, datasets) {
        output$plot <- renderPlot({
          
          ATE <- datasets$get_data('ATE',  filtered = TRUE, reactive = TRUE)
          
          osprey::spiderplot(x = ATE$AVAL, y = ATE$CHANGE, group= ATE$USUBJID,color = ATE$STUDYID)
          
        })
      },
      filters = 'ATE'
    )
  )
)




shinyApp(x$ui, x$server)


```
